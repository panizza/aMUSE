{% load staticfiles %}
{% load url from future %}
{% load thumbnail %}

<script src="{% static "js/image_viewer.js" %}" type="text/javascript"/>
<script>
    $(".open-modal").click(function(){
        var pk= $(this).closest("li").data("pk");
        console.log(pk);
        var url = "{% url 'item_info' '123' %}".replace('123', pk)
        $.get(url, function(data) {
            $('<div class="modal hide fade">' + data + '</div>').modal();
        }).success(function() { $('input:text:visible:first').focus();
                });
    });
</script>
<ul id="gallery" class="gallery ui-helper-reset ui-helper-clearfix">
    {% for obj in lista %}
        <li class="ui-widget-content ui-corner-tr" data-pk="{{ obj.pk }}">
            {% if obj.photo != None %}
                {% thumbnail obj.photo "150x150" as im %}
                    <img src="{{ im.url }}" width="{{ im.width }}" height="{{ im.height }}">
                {% endthumbnail %}
            {% endif%}
                <p>{{ obj.comment }}</p>
            {% if obj.scan != None %}
                <a href="{{ obj.photo.url }}" title="View larger image" class="ui-icon ui-icon-zoomin open-modal">View larger</a>
            {% else %}
                <a href="{{ obj.photo.url }}" title="View larger image" class="ui-icon ui-icon-pencil open-modal">Edit this item</a>

            {% endif %}
            <a title="Delete this image" class="ui-icon ui-icon-trash trash-action">Delete image</a>
        </li>
    {% endfor %}
</ul>

